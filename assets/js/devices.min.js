$(document).ready(function(){var e,a;function t(a,t,n){var s=$(`<div class="formGroup"><label class="font-small">${a}:</label><div>`);for(let e of t)s.append(`<div class="checkboxGroup"><input type="checkbox" name="chb${e.name}" id="chb${e.name}" value="${e.id}" class="chb${a}"/><label for="chb${e.name}" class="font-small">${e.name}</label></div>`);$("#chbGroups").append(s),$(`.${n}`).change(function(){i(e)})}function n(){$("#priceRange").html(`< ${$("#rnPrice").val()}€`)}function i(a){a=l(a=function(e){let a=$("#ddlOrder");"0"!=a.prop("selectedIndex")&&(e="nameAZ"==a.val()?s(e,"name",!1):"nameZA"==a.val()?s(e,"name",!0):"priceASC"==a.val()?s(e,"price",!1):s(e,"price",!0));return e}(a=function(e){try{return e=e.filter(function(e){if(-1!=e.name.toUpperCase().indexOf($("#tbSearch").val().trim().toUpperCase()))return e})}catch(e){console.error(e.description)}}(a)),$(".chbOS"),"os");let t="";if(0==(a=function(e){var a=$("#rnPrice").val();return e=e.filter(function(e){if(e.price<=a)return e})}(a=l(a,$(".chbBrand"),"brand"))).length)t='<p class="font-large">Oops. Seems like there are no items that match your search criteria.</p>';else{let e=6,n=0,i=1;for(let s in a)++n>e&&(n=1),1==n&&(t+=`<div id='page${i}' class='page'>`),t+=`<div class="device"><div class="deviceImage"><img src="assets/img/${a[s].image}" alt="${a[s].name}"/></div><div class="deviceText"><label class="font-medium deviceName">${a[s].name}</label><label class="font-medium devicePrice">${a[s].price}€</label><div class="textCenter"><button class="font-small btnPrimary btnAddToCart" data-id="${a[s].id}"><i class="fas fa-shopping-cart font-medium"></i>+</button></div></div></div>`,n!=e&&s!=a.length-1||(t+="</div>",i++);t+="<div id='paging'><ul class='font-small'><li><a href='#' class='btnPrimary prevPage'><</a></li>";for(let e=1;e<i;e++)t+=`<li><a class='btnPrimary btnPage' data-page='${e}'>${e}</a></li>`;t+="<li><a href='#' class='btnPrimary nextPage'>></a></li></ul></div>"}$("#devicesContainer").html(t),$(".btnAddToCart").click(function(){!function(a){let t=loadLocalStorage("cart");var n,i=parseInt($(a).data("id")),s=!1;for(let e in t)if(i==t[e].id){n=e,s=!0;break}if(s)t[n].quantity<10?(t[n].quantity++,updateLocalStorage(t,"cart"),d()):r($("<div class='addToCartModal'><div class='addToCartModalContent cannotAdd'><p class='font-small'>You can't have more than 10 of the same device in your cart.</p></div></div>"));else{for(let a in e)if(e[a].id==i){n=a;break}t.push({id:e[n].id,name:e[n].name,price:e[n].price,quantity:1}),updateLocalStorage(t,"cart"),d()}printCartNumber()}(this)}),c()}function s(e,a,t){var n=1,i=-1;return t&&(n=-1,i=1),e.sort(function(e,t){return e[a]>t[a]?n:e[a]<t[a]?i:0}),e}function l(e,a,t){var n=[];for(let e of a)e.checked&&n.push(e.value);return n.length>0&&(e=e.filter(function(e){for(let a of n)if(a==e[t])return e})),e}function r(e){$("body").append(e),e.hide(),e.fadeIn("fast"),setTimeout(function(){e.fadeOut("fast",function(){e.remove()})},2e3)}function d(){r($('<div class="addToCartModal"><div class="addToCartModalContent"><p class="font-small">Item has been succesfully added to your cart.</p></div></div>'))}function c(){a=1,$(".page:not(:first)").hide(),$(".btnPage:first").addClass("activePage"),$(".prevPage").addClass("disabled"),1==$(".page").length&&$(".nextPage").addClass("disabled"),$("#paging a").click(function(e){if(e.preventDefault(),!$(this).hasClass("disabled")){if($(this).hasClass("prevPage")||$(this).hasClass("nextPage"))$(this).hasClass("prevPage")?a>1&&a--:a<$(".page").length&&a++,$(".page").hide(),$(`#page${a}`).show(),$(".btnPage").removeClass("activePage").eq(a-1).addClass("activePage");else{let e=$(this).data("page");$(".page").hide(),$(`#page${e}`).show(),$(".btnPage").removeClass("activePage"),$(this).addClass("activePage"),a=e}1==a?$(".prevPage").addClass("disabled"):$(".prevPage").removeClass("disabled"),a==$(".page").length?$(".nextPage").addClass("disabled"):$(".nextPage").removeClass("disabled")}})}loadJson("operatingSystems",function(e){t("OS",e,"chbOS")}),loadJson("brands",function(e){e,t("Brand",e,"chbBrand")}),n(),$("#rnPrice").on("input",n),loadJson("devices",function(a){e=a,i(a)}),$("#tbSearch").keyup(function(){i(e)}),$("#ddlOrder, #rnPrice").change(function(){i(e)}),c()});